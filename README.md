# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

1) Класс Api
Предоставляет методы для получения данных с сервера и отправки запросов на сервер.
Конструктор принимает такие аргументы как:
baseUrl - базовоый URL для формирования адреса запроса
options - объект с настройками запроса
Методы:
get - для отправки get запроса на сервер, аргументом принимает строку с эндпоинтом
post - для отправки put запроса на сервер, аргументом принимает эндпоинт и объект с данными для отправки

3) Класс EventEmitter
Брокер событий. Предоставляет следующие методы:
on<T extends object>(eventName: EventName, callback: (event: T) => void) - устанавливает обработчик на событие, аргументами принимает название события и колбэк.
off(eventName: EventName, callback: Subscriber) - снимает обработчик с события, принимает название события и колбэк.
emit<T extends object>(eventName: string, data?: T) - инициирует событие, принимает название события и объект с данными.
onAll(callback: (event: EmitterEvent) => void) - подписывается на все события.
offAll() - снимает все обработчики.
trigger<T extends object>(eventName: string, context?: Partial<T>) - вызывает коллбек триггер, генерирующий событие при вызове.

4) Класс Basket
Класс для отображения корзины на странице, имплеминтирует EventEmitter для инициации событий, связанных с элементами корзины.
Конструктор принимает тимплейт корзины для создания элемента корзины и инициализирует такие поля как:
  basketElement: HTMLElement - клонированный Node узел
  basketTotalPrice: HTMLElement - отображает общую стоимость всех товаров, добавленных в корзину.
  _basketList: HTMLElement - контейнер для отображения товаров в корзине.
  submitButton: HTMLButtonElement - кнопка для оформления заказа, при клике генерирует событие submit:order.
Методы:
render() - возвращает клонированный тимплейт со всеми дочерними элементами.
set content(value: HTMLElement) - сеттер, аппендит HTML элемент итема, добавленного в корзину, в поле _basketList для последующий отрисовки их на странице.
set total(value: string) - сеттер, отображает общую стоимость всех элементов в корзине. 
disableButton(addedCardList: card[]) - метод, принимающий список добавленных в корзину итемов, меняет состояние кнопки сабмита.

5) Класс BasketItem
Класс для отображения добавленного итема в корзину, имплеминтирует EventEmitter для инициации событий, связанных с элементами итема.
Конструктор принимает тимплейт итема для создания элемента и инициализирует такие поля как:
  basketElement: HTMLElement - клонированный Node узел
  basketItemIndex: HTMLElement - элемент отображения порядкового номера элемента в корзине
  basketItem: HTMLElement - контейнер элемента
  basketItemTitle: HTMLElement - элемент для отображения названия итема
  basketItemPrice: HTMLElement - элемент для отображения стоимости итема
  basketItemDeleteButton: HTMLButtonElement - кнопка для удаления итема из корзины, генерирует событие basket:itemDelete
  itemId: string - поле для хранения id создаваемого итема
Методы: 
render(card: card, cardsList: card[]) - метод устанавливающий текст для отображения в элементах итема, возвращает нодовый узел. В аргументах принимает модель итема и список добавленных итемов.

5) Класс BasketPage
Класс для отображения элемента корзины на странице магазина, имплеминтирует EventEmitter для инициации событий. Содержит такие поля как:
  basketButton: HTMLElement - кнопка для открытия корзины, инициирует событие basket:open по клику
  basketCounter: HTMLElement - элемент, отображающих количество товаров, добавленных в корзину

6) Класс Card
Класс для отображения каталога карточек на странице и отображения карточки с полным описанием при открытии превью, имплеминтирует EventEmitter для инициации событий, связанных с элементами карточки.
Конструктор принимает тимплейт карточки.
Содержит поля:
  cardElement: HTMLElement - хранит клонированный тимплейт
  cardButton?: HTMLButtonElement - кнопка-обертка карточки, необязательное поле. При клике инициирует событие card:open для открытия превью карточки
  cardCategory: HTMLElement - элемент для отображения категории карточки
  cardTitle: HTMLElement - элемент отображения названия карточки
  cardImage: HTMLImageElement - отображение картонки карточки
  cardPrice: HTMLElement - элемент отображения цены карточки
  cardDescription?: HTMLElement - отображение полного описания карточки, необязательное поле
  cardAddButton?: HTMLButtonElement - кнопка для добавления карточки в корзину, инициирует событие basket:cardAdded, необязательное поле
Методы: 
render(card: card) - метод, устанавливающий текст для отображения элементов карточки, принимает аргументом модель карточки.

7) Класс FormAddress
Класс для отображения элементов формы адреса, имплеминтирует EventEmitter для инициации событий, связанных с элементами формы.
Конструктор принимает тимплейт формы.
Содержит поля: 
  formElement: HTMLFormElement - хранит клонированный тимплейт со всеми дочерними элементами.
  form: HTMLFormElement - контейнер формы
  onlineButton: HTMLButtonElement - кнопка выбора оплаты, при клике вызывает метод класса activateOnlineButton() и инициирует событие user:onlineSelected
  offlineButton: HTMLButtonElement - кнопка выбора оплаты, при клике вызывает метод класса activateOOfflineButton() и инициирует событие user:offlineSelected
  inputAddres: HTMLInputElement - элемент инпута адреса формы, при вводе данных пользователем инициирует событие user:inputAddres
  submitButton: HTMLButtonElement - кнопка сабмита формы, инициирует событие user:submitForm
  error: HTMLElement - элемент для отображения кастомных ошибок при валидации формы
Методы: 
activateOnlineButton() - метод, вызывающийся при нажатии на кнопку onlineButton, изменяет классы кнопки для отображения выбранного пользователем метода оплаты
activateOfflineButton() - метод, вызывающийся при нажатии на кнопку offlineButton, изменяет классы кнопки для отображения выбранного пользователем метода оплаты
render() - возвращает элемент формы со всеми дочерними элементами.

8) Класс FormContacts
Класс для отображения элементов формы контактов, имплеминтирует EventEmitter для инициации событий, связанных с элементами формы.
Конструктор принимает тимплейт формы контактов.
Содержит поля:
  templateForm: HTMLFormElement -  хранит клонированный тимплейт со всеми дочерними элементами
  form: HTMLFormElement - контейнер формы контактов
  emailInput: HTMLInputElement - элемент инпута почты формы, при вводе данных пользователем инициирует событие user:emailInput
  phoneInput: HTMLInputElement - элемент инпута телефона формы, при вводе данных пользователем инициирует событие user:phoneInput
  submitButton: HTMLButtonElement - кнопка сабмита формы, инициирует событие user:contactsFormSubmit
  error: HTMLElement - элемент для отображения кастомных ошибок привалидации формы
Методы: 
render() - возвращает элемент формы со всеми дочерними элементами.

9) Класс Succsess
Класс для отображения сообщения об успешной оплате товаров, имплеминтирует EventEmitter для инициации событий, связанных с элементами данного окна.
Конструктор принимает тимплейт окна.
Содержит поля:
  element: HTMLElement - хранит клонированный тимплейт со всеми дочерними элементами
  orderDescription: HTMLElement - элемент для отображения информации об оплате товаров
  button: HTMLButtonElement - кнопка закрытия окна, инициирует событие succsess:close
Методы: 
setDescription(value: string) - заполняет текст в элементе orderDescription
render () - возвращает элемент окна с дочерними элементами

10) Класс Modal
Класс для отображения модального окна, предоставляет методы его открытия, закрытия и наполнения контентом. Имлементирует EventEmitter для инициации событий, связанных с элементами модального окна.
Конструктор принимает контейнер модального окна.
Содержит поля: 
  closeBtnElement: HTMLButtonElement - кнопка закрытия модального окна, при клике вызывает метод класса closeModal()
  _content: HTMLElement - поле, хранящее разметку для отображения в модальном окне.
  modalContainer: HTMLElement - контейнер модального окна для реализации закрытия модального окна при клике по оверлею, при клике вызывает метод класса closeModal()
  pageWrapper: HTMLElement - хранит элемент обертки всей страницы, для возможности ее заблокировать при открытии модального окна
Методы: 
closeModal() - закрытие модального окна и разблокировка прокрутки страницы
openModal() - открытие модального окна и блокировка прокрутки страницы
set content(value: HTMLElement) - сеттер для вставки разметки в модальное окно

11) Класс UserOptions
Модель, хранящая данные, которые ввел пользователь на странице.
Поля: 
  _paymentMethod: 'card' | 'cash' | null - выбранный пользователем способ оплаты 
  _addres: string - заполненный пользователем адрес в инпуте формы
  _email: string - заполненный пользователем емеил в инпуте формы
  _phone: string - заполненный пользователем телефон в инпуте формы
Сеттеры: 
set paymentMethod(value: 'card' | 'cash' | null) - устанавливает способ оплаты, выбранный пользователем
set address(value: string) - устанавливает адрес пользователя
set email(value: string) - устанавливает почту пользователя
set phone(value: string) - устанавливает телефон пользователя
Методы: 
resetFields() - сбрасывает все поля модели до начальных значений
